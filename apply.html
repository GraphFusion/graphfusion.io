<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Apply for a Position at GraphFusion</title>
    <style>
        /* ... (previous styles remain the same) ... */
        .email-instructions {
            background-color: var(--tertiary-color);
            padding: 1rem;
            border-radius: 4px;
            margin-bottom: 2rem;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Apply for a Position at GraphFusion</h1>
        <div class="email-instructions">
            <p>Please note: All job applications and internship inquiries should be sent directly to <strong>careers@GraphFusion.onmicrosoft.com</strong></p>
            <p>Use the form below to prepare your application, then copy the contents into an email to the address above.</p>
        </div>
        <form id="application-form">
            <label for="job-title">Position</label>
            <input type="text" id="job-title" name="job-title" readonly>

            <label for="name">Full Name</label>
            <input type="text" id="name" name="name" required>

            <label for="email">Email</label>
            <input type="email" id="email" name="email" required>

            <label for="phone">Phone</label>
            <input type="tel" id="phone" name="phone" required>

            <label for="resume">Resume/CV (Please note any attachments in your email)</label>
            <textarea id="resume" name="resume" rows="5" placeholder="Paste a text version or note that you'll attach your resume to the email"></textarea>

            <label for="cover-letter">Cover Letter</label>
            <textarea id="cover-letter" name="cover-letter" required></textarea>

            <label for="portfolio">Portfolio URL (if applicable)</label>
            <input type="url" id="portfolio" name="portfolio">

            <label for="start-date">Earliest Start Date</label>
            <input type="date" id="start-date" name="start-date" required>

            <label for="hear-about">How did you hear about us?</label>
            <select id="hear-about" name="hear-about" required>
                <option value="">Please select</option>
                <option value="job-board">Job Board</option>
                <option value="company-website">Company Website</option>
                <option value="referral">Employee Referral</option>
                <option value="social-media">Social Media</option>
                <option value="other">Other</option>
            </select>

            <button type="button" id="prepare-email" class="cta-button">Prepare Email</button>
        </form>
    </div>

    <script>
        // Get the job title from the URL parameter
        const urlParams = new URLSearchParams(window.location.search);
        const jobTitle = urlParams.get('job');
        
        // Set the job title in the form
        document.getElementById('job-title').value = jobTitle ? jobTitle.replace(/-/g, ' ').replace(/\b\w/g, l => l.toUpperCase()) : 'Unknown Position';

        // Handle form submission
        document.getElementById('prepare-email').addEventListener('click', function(e) {
            e.preventDefault();
            const form = document.getElementById('application-form');
            let emailBody = '';
            for (let i = 0; i < form.elements.length; i++) {
                const element = form.elements[i];
                if (element.name && element.value) {
                    emailBody += `${element.name}: ${element.value}\n\n`;
                }
            }
            const subject = `Application for ${document.getElementById('job-title').value}`;
            const mailtoLink = `mailto:careers@GraphFusion.onmicrosoft.com?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(emailBody)}`;
            window.location.href = mailtoLink;
        });
    </script>
</body>
</html>